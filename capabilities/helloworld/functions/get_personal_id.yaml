parameters:
  - name: person
    optional: true
action_groups:
  - actions:
      - type: set-variables
        variables:
          - name: login_user_id
            value: <? $initial_context.user_id ?>
          - name: login_person_id
            value: <? $initial_context.person_id ?> 
      # view my direct report Sara
      - type: dialog-function
        name: ect/employee/get_emp_search_mine
        parameters:
          - name: user_name
            value: <? person ?>
          - name: use_case
            value: <? use_case ?>
          - name: user_id
            value: <? login_user_id ?>
        result_variable: employee_list
  - condition: employee_list!=null && employee_list.success && employee_list.person_not_found # if direct report with specified name is not found
    actions:
      - type: message
        message: 
          type: text
          content: "<? new i18n('COMMON_PERSON_SELECTION_NO_DIRECT_REPORT', person) ?>"
  - condition: employee_list!=null && employee_list.success && !employee_list.person_not_found
    actions:
      - type: dialog-function
        name: ect/employee/render_emp_list
        parameters:
          - name: use_case
            value: <? use_case ?>
          - name: result_list
            value: <? employee_list ?>
          - name: person_list
            value: <? null ?>
          - name: entity_label
            value: <? entity_label ?>
          - name: entity_label_plural
            value: <? entity_label_plural ?>
          - name: is_manager_flag
            value: false
          - name: selected_manager
            value: <? null ?>
          - name: search_my_own
            value: false
          - name: search_mine
            value: true